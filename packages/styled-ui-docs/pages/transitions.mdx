# Transitions

Transition helps make a UI expressive and easy to use. The Transition components use `react-transition-group` internally to perform animation effects and manage component states (including mounting and unmounting) over time.

## Import

```js
import {
  Collapse,
  Fade,
  Scale,
  Slide,
  Zoom,
} from '@trendmicro/react-styled-ui';
```

## Usage

### Collapse

Expand vertically from the top of the children. The `collapsedHeight` property can also be used to set the minimum height when collapsed.

```jsx
function Example() {
  const { isOpen, onToggle } = useDisclosure();

  return (
    <Stack direction="column" spacing="4x" shouldWrapChildren>
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <Collapse
        in={isOpen}
        collapsedHeight={0}
        unmountOnExit={false}
      >
        <SkeletonContent>
          <SkeletonBody />
        </SkeletonContent>
      </Collapse>
    </Stack>
  );
}
```

### Fade

```jsx
function Example() {
  const { isOpen, onToggle } = useDisclosure();

  return (
    <Stack direction="column" spacing="4x" shouldWrapChildren>
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <Fade
        in={isOpen}
        unmountOnExit={false}
      >
        <SkeletonContent>
          <SkeletonBody />
        </SkeletonContent>
      </Fade>
    </Stack>
  );
}
```

### Scale

```jsx
function Example() {
  const { isOpen, onToggle } = useDisclosure();

  return (
    <Stack direction="column" spacing="4x" shouldWrapChildren>
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <Scale
        in={isOpen}
        unmountOnExit={false}
      >
        <SkeletonContent>
          <SkeletonBody />
        </SkeletonContent>
      </Scale>
    </Stack>
  );
}
```

### Slide

```jsx noInline
const useSelection = (defaultValue) => {
  const [value, setValue] = React.useState(defaultValue);
  const changeBy = (value) => () => setValue(value);
  return [value, changeBy];
};

function Example() {
  const { isOpen, onClose, onToggle } = useDisclosure();
  const [direction, changeDirectionBy] = useSelection('up');

  return (
    <Stack direction="column" spacing="4x" shouldWrapChildren>
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <ButtonGroup
        variant="secondary"
        css={{
          '> *:not(:first-of-type)': {
            marginLeft: -1
          }
        }}
      >
        {['up', 'down', 'left', 'right'].map(value => {
          const changeDirection = changeDirectionBy(value);
          const onClick = () => {
            changeDirection();
            onClose();
          };

          return (
            <SelectableButton
              key={value}
              selected={value === direction}
              onClick={onClick}
              minWidth="15x"
            >
              {value}
            </SelectableButton>
          );
        })}
      </ButtonGroup>
      <Box overflow="hidden">
        <Slide
          in={isOpen}
          direction={direction}
          unmountOnExit={false}
        >
          <SkeletonContent>
            <SkeletonBody />
          </SkeletonContent>
        </Slide>
      </Box>
    </Stack>
  );
}

render(<Example />);
```

### Zoom

```jsx
function Example() {
  const { isOpen, onToggle } = useDisclosure();

  return (
    <Stack direction="column" spacing="4x" shouldWrapChildren>
      <Flex as="label" display="inline-flex" align="center" cursor="pointer" userSelect="none">
        <ToggleSwitch checked={isOpen} onChange={onToggle} size="sm" />
        <Space width="2x" />
        <Text>Show</Text>
      </Flex>
      <Zoom
        in={isOpen}
        unmountOnExit={false}
      >
        <SkeletonContent>
          <SkeletonBody />
        </SkeletonContent>
      </Zoom>
    </Stack>
  );
}
```

## Props

The timing functions are commonly called <i>easing functions</i>, and can be defined using a predefined keyword value, a stepping function, or a cubic Bezier curve.

### Collapse

The Collapse transition is used by the `Accordion` component.

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeInOut, exit: easing.easeInOut } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| in | boolean | | If `true`, the component will transition in. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | number \| { appear?: number, enter?: number, exit?: number } | { enter: duration.standard, exit: duration.standard } | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |

### Fade

The Fade transition is be used by the `Modal` component.

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeInOut, exit: easing.easeInOut } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| in | boolean | | If `true`, the component will transition in. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | number \| { appear?: number, enter?: number, exit?: number } | { enter: duration.enterScreen, exit: duration.levingScreen } | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |

### Scale

The Scale transition is be used by the `Tooltip` and `Popover` components.

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeOut, exit: easing.easeIn } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| in | boolean | | If `true`, the component will transition in. |
| initialScale | number | 0.95 | The initial scale of the element. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | number \| { appear?: number, enter?: number, exit?: number } | { enter: 150, exit: 150 } | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |

### Slide

The Slide transition is used by the `Drawer` component.

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeOut, exit: easing.sharp } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| direction | string | 'down' | One of: `'up'`, `'down'`, `'left'`, `'right'` |
| in | boolean | | If `true`, the component will transition in. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | number \| { appear?: number, enter?: number, exit?: number } | { enter: duration.enterScreen, exit: duration.levingScreen } | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |

### Zoom

The Zoom transition is used for zooming in/out the displayed components.

| Name | Type | Default | Description |
| :--- | :--- | :------ | :---------- |
| children | ReactNode \| (state, { ref, style, ...childProps }) => ReactNode | | A function child can be used instead of a React element. This function is called with the current transition state (`'entering'`, `'entered'`, `'exiting'`, `'exited'`), ref, style, and context specific props for a component. |
| easing | string \| { enter?: string, exit?: string } | { enter: easing.easeInOut, exit: easing.easeInOut } | The timing function that describes how intermediate values are calculated during a transition. You may specify a single timing function for all transitions, or individually with an object. |
| in | boolean | | If `true`, the component will transition in. |
| mountOnEnter | boolean | | If `true`, it will "lazy mount" the component on the first `in={true}`. After the first enter transition the component will stay mounted, even on the `'exited'` state, unless you also specify `unmountOnExit`. By default the child component is mounted immediately along with the parent transition component. |
| timeout | number \| { appear?: number, enter?: number, exit?: number } | { enter: duration.enterScreen, exit: duration.levingScreen } | The duration for the transition, in milliseconds. You may specify a single timeout for all transitions, or individually with an object. |
| unmountOnExit | boolean | | If `true`, it will unmount the child component when `in={false}` and the animation has finished. By default the child component stays mounted after it reaches the `'exited'` state. |
